(function(){"use strict";var ie,S,Ye,F,Ke,et,tt,nt,Se,Te,Re,V={},rt=[],Kt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,oe=Array.isArray;function M(t,e){for(var n in e)t[n]=e[n];return t}function Ae(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function st(t,e,n){var s,r,l,i={};for(l in e)l=="key"?s=e[l]:l=="ref"?r=e[l]:i[l]=e[l];if(arguments.length>2&&(i.children=arguments.length>3?ie.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(l in t.defaultProps)i[l]===void 0&&(i[l]=t.defaultProps[l]);return ae(t,i,s,r,null)}function ae(t,e,n,s,r){var l={type:t,props:e,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Ye,__i:-1,__u:0};return r==null&&S.vnode!=null&&S.vnode(l),l}function N(t){return t.children}function ce(t,e){this.props=t,this.context=e}function j(t,e){if(e==null)return t.__?j(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?j(t):null}function lt(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return lt(t)}}function it(t){(!t.__d&&(t.__d=!0)&&F.push(t)&&!ue.__r++||Ke!=S.debounceRendering)&&((Ke=S.debounceRendering)||et)(ue)}function ue(){for(var t,e,n,s,r,l,i,o=1;F.length;)F.length>o&&F.sort(tt),t=F.shift(),o=F.length,t.__d&&(n=void 0,r=(s=(e=t).__v).__e,l=[],i=[],e.__P&&((n=M({},s)).__v=s.__v+1,S.vnode&&S.vnode(n),Ee(e.__P,n,s,e.__n,e.__P.namespaceURI,32&s.__u?[r]:null,l,r??j(s),!!(32&s.__u),i),n.__v=s.__v,n.__.__k[n.__i]=n,ht(l,n,i),n.__e!=r&&lt(n)));ue.__r=0}function ot(t,e,n,s,r,l,i,o,u,c,h){var a,p,d,g,y,k,m=s&&s.__k||rt,b=e.length;for(u=en(n,e,m,u,b),a=0;a<b;a++)(d=n.__k[a])!=null&&(p=d.__i==-1?V:m[d.__i]||V,d.__i=a,k=Ee(t,d,p,r,l,i,o,u,c,h),g=d.__e,d.ref&&p.ref!=d.ref&&(p.ref&&Ce(p.ref,null,d),h.push(d.ref,d.__c||g,d)),y==null&&g!=null&&(y=g),4&d.__u||p.__k===d.__k?u=at(d,u,t):typeof d.type=="function"&&k!==void 0?u=k:g&&(u=g.nextSibling),d.__u&=-7);return n.__e=y,u}function en(t,e,n,s,r){var l,i,o,u,c,h=n.length,a=h,p=0;for(t.__k=new Array(r),l=0;l<r;l++)(i=e[l])!=null&&typeof i!="boolean"&&typeof i!="function"?(u=l+p,(i=t.__k[l]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?ae(null,i,null,null,null):oe(i)?ae(N,{children:i},null,null,null):i.constructor==null&&i.__b>0?ae(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=t,i.__b=t.__b+1,o=null,(c=i.__i=tn(i,n,u,a))!=-1&&(a--,(o=n[c])&&(o.__u|=2)),o==null||o.__v==null?(c==-1&&(r>h?p--:r<h&&p++),typeof i.type!="function"&&(i.__u|=4)):c!=u&&(c==u-1?p--:c==u+1?p++:(c>u?p--:p++,i.__u|=4))):t.__k[l]=null;if(a)for(l=0;l<h;l++)(o=n[l])!=null&&(2&o.__u)==0&&(o.__e==s&&(s=j(o)),ft(o,o));return s}function at(t,e,n){var s,r;if(typeof t.type=="function"){for(s=t.__k,r=0;s&&r<s.length;r++)s[r]&&(s[r].__=t,e=at(s[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=j(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function tn(t,e,n,s){var r,l,i,o=t.key,u=t.type,c=e[n],h=c!=null&&(2&c.__u)==0;if(c===null&&t.key==null||h&&o==c.key&&u==c.type)return n;if(s>(h?1:0)){for(r=n-1,l=n+1;r>=0||l<e.length;)if((c=e[i=r>=0?r--:l++])!=null&&(2&c.__u)==0&&o==c.key&&u==c.type)return i}return-1}function ct(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Kt.test(e)?n:n+"px"}function he(t,e,n,s,r){var l,i;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof s=="string"&&(t.style.cssText=s=""),s)for(e in s)n&&e in n||ct(t.style,e,"");if(n)for(e in n)s&&n[e]==s[e]||ct(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")l=e!=(e=e.replace(nt,"$1")),i=e.toLowerCase(),e=i in t||e=="onFocusOut"||e=="onFocusIn"?i.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+l]=n,n?s?n.u=s.u:(n.u=Se,t.addEventListener(e,l?Re:Te,l)):t.removeEventListener(e,l?Re:Te,l);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ut(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=Se++;else if(e.t<n.u)return;return n(S.event?S.event(e):e)}}}function Ee(t,e,n,s,r,l,i,o,u,c){var h,a,p,d,g,y,k,m,b,z,_,x,w,R,H,I,$e,C=e.type;if(e.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),l=[o=e.__e=n.__e]),(h=S.__b)&&h(e);e:if(typeof C=="function")try{if(m=e.props,b="prototype"in C&&C.prototype.render,z=(h=C.contextType)&&s[h.__c],_=h?z?z.props.value:h.__:s,n.__c?k=(a=e.__c=n.__c).__=a.__E:(b?e.__c=a=new C(m,_):(e.__c=a=new ce(m,_),a.constructor=C,a.render=rn),z&&z.sub(a),a.props=m,a.state||(a.state={}),a.context=_,a.__n=s,p=a.__d=!0,a.__h=[],a._sb=[]),b&&a.__s==null&&(a.__s=a.state),b&&C.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=M({},a.__s)),M(a.__s,C.getDerivedStateFromProps(m,a.__s))),d=a.props,g=a.state,a.__v=e,p)b&&C.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),b&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(b&&C.getDerivedStateFromProps==null&&m!==d&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(m,_),!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(m,a.__s,_)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(a.props=m,a.state=a.__s,a.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(Z){Z&&(Z.__=e)}),x=0;x<a._sb.length;x++)a.__h.push(a._sb[x]);a._sb=[],a.__h.length&&i.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(m,a.__s,_),b&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(d,g,y)})}if(a.context=_,a.props=m,a.__P=t,a.__e=!1,w=S.__r,R=0,b){for(a.state=a.__s,a.__d=!1,w&&w(e),h=a.render(a.props,a.state,a.context),H=0;H<a._sb.length;H++)a.__h.push(a._sb[H]);a._sb=[]}else do a.__d=!1,w&&w(e),h=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++R<25);a.state=a.__s,a.getChildContext!=null&&(s=M(M({},s),a.getChildContext())),b&&!p&&a.getSnapshotBeforeUpdate!=null&&(y=a.getSnapshotBeforeUpdate(d,g)),I=h,h!=null&&h.type===N&&h.key==null&&(I=pt(h.props.children)),o=ot(t,oe(I)?I:[I],e,n,s,r,l,i,o,u,c),a.base=e.__e,e.__u&=-161,a.__h.length&&i.push(a),k&&(a.__E=a.__=null)}catch(Z){if(e.__v=null,u||l!=null)if(Z.then){for(e.__u|=u?160:128;o&&o.nodeType==8&&o.nextSibling;)o=o.nextSibling;l[l.indexOf(o)]=null,e.__e=o}else{for($e=l.length;$e--;)Ae(l[$e]);ze(e)}else e.__e=n.__e,e.__k=n.__k,Z.then||ze(e);S.__e(Z,e,n)}else l==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):o=e.__e=nn(n.__e,e,n,s,r,l,i,u,c);return(h=S.diffed)&&h(e),128&e.__u?void 0:o}function ze(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(ze)}function ht(t,e,n){for(var s=0;s<n.length;s++)Ce(n[s],n[++s],n[++s]);S.__c&&S.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(l){l.call(r)})}catch(l){S.__e(l,r.__v)}})}function pt(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:oe(t)?t.map(pt):M({},t)}function nn(t,e,n,s,r,l,i,o,u){var c,h,a,p,d,g,y,k=n.props,m=e.props,b=e.type;if(b=="svg"?r="http://www.w3.org/2000/svg":b=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),l!=null){for(c=0;c<l.length;c++)if((d=l[c])&&"setAttribute"in d==!!b&&(b?d.localName==b:d.nodeType==3)){t=d,l[c]=null;break}}if(t==null){if(b==null)return document.createTextNode(m);t=document.createElementNS(r,b,m.is&&m),o&&(S.__m&&S.__m(e,l),o=!1),l=null}if(b==null)k===m||o&&t.data==m||(t.data=m);else{if(l=l&&ie.call(t.childNodes),k=n.props||V,!o&&l!=null)for(k={},c=0;c<t.attributes.length;c++)k[(d=t.attributes[c]).name]=d.value;for(c in k)if(d=k[c],c!="children"){if(c=="dangerouslySetInnerHTML")a=d;else if(!(c in m)){if(c=="value"&&"defaultValue"in m||c=="checked"&&"defaultChecked"in m)continue;he(t,c,null,d,r)}}for(c in m)d=m[c],c=="children"?p=d:c=="dangerouslySetInnerHTML"?h=d:c=="value"?g=d:c=="checked"?y=d:o&&typeof d!="function"||k[c]===d||he(t,c,d,k[c],r);if(h)o||a&&(h.__html==a.__html||h.__html==t.innerHTML)||(t.innerHTML=h.__html),e.__k=[];else if(a&&(t.innerHTML=""),ot(e.type=="template"?t.content:t,oe(p)?p:[p],e,n,s,b=="foreignObject"?"http://www.w3.org/1999/xhtml":r,l,i,l?l[0]:n.__k&&j(n,0),o,u),l!=null)for(c=l.length;c--;)Ae(l[c]);o||(c="value",b=="progress"&&g==null?t.removeAttribute("value"):g!=null&&(g!==t[c]||b=="progress"&&!g||b=="option"&&g!=k[c])&&he(t,c,g,k[c],r),c="checked",y!=null&&y!=t[c]&&he(t,c,y,k[c],r))}return t}function Ce(t,e,n){try{if(typeof t=="function"){var s=typeof t.__u=="function";s&&t.__u(),s&&e==null||(t.__u=t(e))}else t.current=e}catch(r){S.__e(r,n)}}function ft(t,e,n){var s,r;if(S.unmount&&S.unmount(t),(s=t.ref)&&(s.current&&s.current!=t.__e||Ce(s,null,e)),(s=t.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(l){S.__e(l,e)}s.base=s.__P=null}if(s=t.__k)for(r=0;r<s.length;r++)s[r]&&ft(s[r],e,n||typeof t.type!="function");n||Ae(t.__e),t.__c=t.__=t.__e=void 0}function rn(t,e,n){return this.constructor(t,n)}function dt(t,e,n){var s,r,l,i;e==document&&(e=document.documentElement),S.__&&S.__(t,e),r=(s=!1)?null:e.__k,l=[],i=[],Ee(e,t=e.__k=st(N,null,[t]),r||V,V,e.namespaceURI,r?null:e.firstChild?ie.call(e.childNodes):null,l,r?r.__e:e.firstChild,s,i),ht(l,t,i)}ie=rt.slice,S={__e:function(t,e,n,s){for(var r,l,i;e=e.__;)if((r=e.__c)&&!r.__)try{if((l=r.constructor)&&l.getDerivedStateFromError!=null&&(r.setState(l.getDerivedStateFromError(t)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,s||{}),i=r.__d),i)return r.__E=r}catch(o){t=o}throw t}},Ye=0,ce.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=M({},this.state),typeof t=="function"&&(t=t(M({},n),this.props)),t&&M(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),it(this))},ce.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),it(this))},ce.prototype.render=N,F=[],et=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tt=function(t,e){return t.__v.__b-e.__v.__b},ue.__r=0,nt=/(PointerCapture)$|Capture$/i,Se=0,Te=ut(!1),Re=ut(!0);var sn=0;function f(t,e,n,s,r,l){e||(e={});var i,o,u=e;if("ref"in u)for(o in u={},e)o=="ref"?i=e[o]:u[o]=e[o];var c={type:t,props:u,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--sn,__i:-1,__u:0,__source:r,__self:l};if(typeof t=="function"&&(i=t.defaultProps))for(o in i)u[o]===void 0&&(u[o]=i[o]);return S.vnode&&S.vnode(c),c}var Y,T,Pe,_t,pe=0,gt=[],A=S,kt=A.__b,mt=A.__r,bt=A.diffed,xt=A.__c,wt=A.unmount,yt=A.__;function Le(t,e){A.__h&&A.__h(T,t,pe||e),pe=0;var n=T.__H||(T.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function G(t){return pe=1,ln(St,t)}function ln(t,e,n){var s=Le(Y++,2);if(s.t=t,!s.__c&&(s.__=[St(void 0,e),function(o){var u=s.__N?s.__N[0]:s.__[0],c=s.t(u,o);u!==c&&(s.__N=[c,s.__[1]],s.__c.setState({}))}],s.__c=T,!T.__f)){var r=function(o,u,c){if(!s.__c.__H)return!0;var h=s.__c.__H.__.filter(function(p){return!!p.__c});if(h.every(function(p){return!p.__N}))return!l||l.call(this,o,u,c);var a=s.__c.props!==o;return h.forEach(function(p){if(p.__N){var d=p.__[0];p.__=p.__N,p.__N=void 0,d!==p.__[0]&&(a=!0)}}),l&&l.call(this,o,u,c)||a};T.__f=!0;var l=T.shouldComponentUpdate,i=T.componentWillUpdate;T.componentWillUpdate=function(o,u,c){if(this.__e){var h=l;l=void 0,r(o,u,c),l=h}i&&i.call(this,o,u,c)},T.shouldComponentUpdate=r}return s.__N||s.__}function O(t,e){var n=Le(Y++,3);!A.__s&&$t(n.__H,e)&&(n.__=t,n.u=e,T.__H.__h.push(n))}function K(t){return pe=5,on(function(){return{current:t}},[])}function on(t,e){var n=Le(Y++,7);return $t(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function an(){for(var t;t=gt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(fe),t.__H.__h.forEach(Ie),t.__H.__h=[]}catch(e){t.__H.__h=[],A.__e(e,t.__v)}}A.__b=function(t){T=null,kt&&kt(t)},A.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),yt&&yt(t,e)},A.__r=function(t){mt&&mt(t),Y=0;var e=(T=t.__c).__H;e&&(Pe===T?(e.__h=[],T.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(fe),e.__h.forEach(Ie),e.__h=[],Y=0)),Pe=T},A.diffed=function(t){bt&&bt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(gt.push(e)!==1&&_t===A.requestAnimationFrame||((_t=A.requestAnimationFrame)||cn)(an)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Pe=T=null},A.__c=function(t,e){e.some(function(n){try{n.__h.forEach(fe),n.__h=n.__h.filter(function(s){return!s.__||Ie(s)})}catch(s){e.some(function(r){r.__h&&(r.__h=[])}),e=[],A.__e(s,n.__v)}}),xt&&xt(t,e)},A.unmount=function(t){wt&&wt(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{fe(s)}catch(r){e=r}}),n.__H=void 0,e&&A.__e(e,n.__v))};var vt=typeof requestAnimationFrame=="function";function cn(t){var e,n=function(){clearTimeout(s),vt&&cancelAnimationFrame(e),setTimeout(t)},s=setTimeout(n,35);vt&&(e=requestAnimationFrame(n))}function fe(t){var e=T,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),T=e}function Ie(t){var e=T;t.__c=t.__(),T=e}function $t(t,e){return!t||t.length!==e.length||e.some(function(n,s){return n!==t[s]})}function St(t,e){return typeof e=="function"?e(t):e}function Tt({config:t,open:e,onToggle:n}){return t?.header?f("div",{class:"hw-header",onClick:n,children:e&&f("div",{class:"hw-header-wrap",children:[f("span",{class:"hw-header-title",children:"Chat with us"}),f("div",{class:"hw-header-buttons",children:[f("span",{class:"minimize-btn",onClick:s=>{s.stopPropagation(),n(),L.set("idle")}}),f("span",{class:"close-btn",onClick:s=>{s.stopPropagation(),L.set("closing")}})]})]})}):null}function Rt({config:t,status:e,draft:n,setDraft:s,send:r,cancel:l}){const i=K(null),o=()=>{const a=i.current;a&&(a.style.height="auto",a.style.height=`${a.scrollHeight}px`)};O(()=>{o()},[n]),O(()=>{e==="idle"&&i.current&&i.current.focus()},[e]);const u=a=>{s(a.currentTarget.value)},c=a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),r())},h=e==="sending";return f("div",{className:"widget-input",children:f("div",{className:"input-area",children:[f("textarea",{ref:i,value:n,placeholder:h?"...":t.placeholder||"Ask copilot...",disabled:h,onInput:u,onKeyDown:c,rows:1}),h?f("button",{onClick:l,className:"cancel-btn",children:f("span",{className:"icon"})}):f("button",{onClick:r,className:"send-btn",children:f("span",{className:"icon"})})]})})}function Ne(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var W=Ne();function At(t){W=t}var ee={exec:()=>null};function v(t,e=""){let n=typeof t=="string"?t:t.source,s={replace:(r,l)=>{let i=typeof l=="string"?l:l.source;return i=i.replace(E.caret,"$1"),n=n.replace(r,i),s},getRegex:()=>new RegExp(n,e)};return s}var E={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},un=/^(?:[ \t]*(?:\n|$))+/,hn=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,pn=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,te=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,fn=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,qe=/(?:[*+-]|\d{1,9}[.)])/,Et=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,zt=v(Et).replace(/bull/g,qe).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),dn=v(Et).replace(/bull/g,qe).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),He=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,_n=/^[^\n]+/,Me=/(?!\s*\])(?:\\.|[^\[\]\\])+/,gn=v(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Me).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),kn=v(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,qe).getRegex(),de="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Be=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,mn=v("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Be).replace("tag",de).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ct=v(He).replace("hr",te).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",de).getRegex(),bn=v(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ct).getRegex(),De={blockquote:bn,code:hn,def:gn,fences:pn,heading:fn,hr:te,html:mn,lheading:zt,list:kn,newline:un,paragraph:Ct,table:ee,text:_n},Pt=v("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",te).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",de).getRegex(),xn={...De,lheading:dn,table:Pt,paragraph:v(He).replace("hr",te).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Pt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",de).getRegex()},wn={...De,html:v(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Be).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ee,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:v(He).replace("hr",te).replace("heading",` *#{1,6} *[^
]`).replace("lheading",zt).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},yn=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,vn=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Lt=/^( {2,}|\\)\n(?!\s*$)/,$n=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,_e=/[\p{P}\p{S}]/u,Oe=/[\s\p{P}\p{S}]/u,It=/[^\s\p{P}\p{S}]/u,Sn=v(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Oe).getRegex(),Nt=/(?!~)[\p{P}\p{S}]/u,Tn=/(?!~)[\s\p{P}\p{S}]/u,Rn=/(?:[^\s\p{P}\p{S}]|~)/u,An=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,qt=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,En=v(qt,"u").replace(/punct/g,_e).getRegex(),zn=v(qt,"u").replace(/punct/g,Nt).getRegex(),Ht="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Cn=v(Ht,"gu").replace(/notPunctSpace/g,It).replace(/punctSpace/g,Oe).replace(/punct/g,_e).getRegex(),Pn=v(Ht,"gu").replace(/notPunctSpace/g,Rn).replace(/punctSpace/g,Tn).replace(/punct/g,Nt).getRegex(),Ln=v("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,It).replace(/punctSpace/g,Oe).replace(/punct/g,_e).getRegex(),In=v(/\\(punct)/,"gu").replace(/punct/g,_e).getRegex(),Nn=v(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),qn=v(Be).replace("(?:-->|$)","-->").getRegex(),Hn=v("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",qn).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ge=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Mn=v(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ge).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Mt=v(/^!?\[(label)\]\[(ref)\]/).replace("label",ge).replace("ref",Me).getRegex(),Bt=v(/^!?\[(ref)\](?:\[\])?/).replace("ref",Me).getRegex(),Bn=v("reflink|nolink(?!\\()","g").replace("reflink",Mt).replace("nolink",Bt).getRegex(),Ue={_backpedal:ee,anyPunctuation:In,autolink:Nn,blockSkip:An,br:Lt,code:vn,del:ee,emStrongLDelim:En,emStrongRDelimAst:Cn,emStrongRDelimUnd:Ln,escape:yn,link:Mn,nolink:Bt,punctuation:Sn,reflink:Mt,reflinkSearch:Bn,tag:Hn,text:$n,url:ee},Dn={...Ue,link:v(/^!?\[(label)\]\((.*?)\)/).replace("label",ge).getRegex(),reflink:v(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ge).getRegex()},Ze={...Ue,emStrongRDelimAst:Pn,emStrongLDelim:zn,url:v(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},On={...Ze,br:v(Lt).replace("{2,}","*").getRegex(),text:v(Ze.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ke={normal:De,gfm:xn,pedantic:wn},ne={normal:Ue,gfm:Ze,breaks:On,pedantic:Dn},Un={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Dt=t=>Un[t];function q(t,e){if(e){if(E.escapeTest.test(t))return t.replace(E.escapeReplace,Dt)}else if(E.escapeTestNoEncode.test(t))return t.replace(E.escapeReplaceNoEncode,Dt);return t}function Ot(t){try{t=encodeURI(t).replace(E.percentDecode,"%")}catch{return null}return t}function Ut(t,e){let n=t.replace(E.findPipe,(l,i,o)=>{let u=!1,c=i;for(;--c>=0&&o[c]==="\\";)u=!u;return u?"|":" |"}),s=n.split(E.splitPipe),r=0;if(s[0].trim()||s.shift(),s.length>0&&!s.at(-1)?.trim()&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;r<s.length;r++)s[r]=s[r].trim().replace(E.slashPipe,"|");return s}function re(t,e,n){let s=t.length;if(s===0)return"";let r=0;for(;r<s&&t.charAt(s-r-1)===e;)r++;return t.slice(0,s-r)}function Zn(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let s=0;s<t.length;s++)if(t[s]==="\\")s++;else if(t[s]===e[0])n++;else if(t[s]===e[1]&&(n--,n<0))return s;return n>0?-2:-1}function Zt(t,e,n,s,r){let l=e.href,i=e.title||null,o=t[1].replace(r.other.outputLinkReplace,"$1");s.state.inLink=!0;let u={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:l,title:i,text:o,tokens:s.inlineTokens(o)};return s.state.inLink=!1,u}function Fn(t,e,n){let s=t.match(n.other.indentCodeCompensation);if(s===null)return e;let r=s[1];return e.split(`
`).map(l=>{let i=l.match(n.other.beginningSpace);if(i===null)return l;let[o]=i;return o.length>=r.length?l.slice(r.length):l}).join(`
`)}var me=class{options;rules;lexer;constructor(t){this.options=t||W}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:re(n,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let n=e[0],s=Fn(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){let s=re(n,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(n=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:re(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let n=re(e[0],`
`).split(`
`),s="",r="",l=[];for(;n.length>0;){let i=!1,o=[],u;for(u=0;u<n.length;u++)if(this.rules.other.blockquoteStart.test(n[u]))o.push(n[u]),i=!0;else if(!i)o.push(n[u]);else break;n=n.slice(u);let c=o.join(`
`),h=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${c}`:c,r=r?`${r}
${h}`:h;let a=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,l,!0),this.lexer.state.top=a,n.length===0)break;let p=l.at(-1);if(p?.type==="code")break;if(p?.type==="blockquote"){let d=p,g=d.raw+`
`+n.join(`
`),y=this.blockquote(g);l[l.length-1]=y,s=s.substring(0,s.length-d.raw.length)+y.raw,r=r.substring(0,r.length-d.text.length)+y.text;break}else if(p?.type==="list"){let d=p,g=d.raw+`
`+n.join(`
`),y=this.list(g);l[l.length-1]=y,s=s.substring(0,s.length-p.raw.length)+y.raw,r=r.substring(0,r.length-d.raw.length)+y.raw,n=g.substring(l.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:l,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim(),s=n.length>1,r={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");let l=this.rules.other.listItemRegex(n),i=!1;for(;t;){let u=!1,c="",h="";if(!(e=l.exec(t))||this.rules.block.hr.test(t))break;c=e[0],t=t.substring(c.length);let a=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,m=>" ".repeat(3*m.length)),p=t.split(`
`,1)[0],d=!a.trim(),g=0;if(this.options.pedantic?(g=2,h=a.trimStart()):d?g=e[1].length+1:(g=e[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,h=a.slice(g),g+=e[1].length),d&&this.rules.other.blankLine.test(p)&&(c+=p+`
`,t=t.substring(p.length+1),u=!0),!u){let m=this.rules.other.nextBulletRegex(g),b=this.rules.other.hrRegex(g),z=this.rules.other.fencesBeginRegex(g),_=this.rules.other.headingBeginRegex(g),x=this.rules.other.htmlBeginRegex(g);for(;t;){let w=t.split(`
`,1)[0],R;if(p=w,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),R=p):R=p.replace(this.rules.other.tabCharGlobal,"    "),z.test(p)||_.test(p)||x.test(p)||m.test(p)||b.test(p))break;if(R.search(this.rules.other.nonSpaceChar)>=g||!p.trim())h+=`
`+R.slice(g);else{if(d||a.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||z.test(a)||_.test(a)||b.test(a))break;h+=`
`+p}!d&&!p.trim()&&(d=!0),c+=w+`
`,t=t.substring(w.length+1),a=R.slice(g)}}r.loose||(i?r.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(i=!0));let y=null,k;this.options.gfm&&(y=this.rules.other.listIsTask.exec(h),y&&(k=y[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:c,task:!!y,checked:k,loose:!1,text:h,tokens:[]}),r.raw+=c}let o=r.items.at(-1);if(o)o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let u=0;u<r.items.length;u++)if(this.lexer.state.top=!1,r.items[u].tokens=this.lexer.blockTokens(r.items[u].text,[]),!r.loose){let c=r.items[u].tokens.filter(a=>a.type==="space"),h=c.length>0&&c.some(a=>this.rules.other.anyLine.test(a.raw));r.loose=h}if(r.loose)for(let u=0;u<r.items.length;u++)r.items[u].loose=!0;return r}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:s,title:r}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let n=Ut(e[1]),s=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],l={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===s.length){for(let i of s)this.rules.other.tableAlignRight.test(i)?l.align.push("right"):this.rules.other.tableAlignCenter.test(i)?l.align.push("center"):this.rules.other.tableAlignLeft.test(i)?l.align.push("left"):l.align.push(null);for(let i=0;i<n.length;i++)l.header.push({text:n[i],tokens:this.lexer.inline(n[i]),header:!0,align:l.align[i]});for(let i of r)l.rows.push(Ut(i,l.header.length).map((o,u)=>({text:o,tokens:this.lexer.inline(o),header:!1,align:l.align[u]})));return l}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;let l=re(n.slice(0,-1),"\\");if((n.length-l.length)%2===0)return}else{let l=Zn(e[2],"()");if(l===-2)return;if(l>-1){let i=(e[0].indexOf("!")===0?5:4)+e[1].length+l;e[2]=e[2].substring(0,l),e[0]=e[0].substring(0,i).trim(),e[3]=""}}let s=e[2],r="";if(this.options.pedantic){let l=this.rules.other.pedanticHrefTitle.exec(s);l&&(s=l[1],r=l[3])}else r=e[3]?e[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?s=s.slice(1):s=s.slice(1,-1)),Zt(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let s=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=e[s.toLowerCase()];if(!r){let l=n[0].charAt(0);return{type:"text",raw:l,text:l}}return Zt(n,r,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let s=this.rules.inline.emStrongLDelim.exec(t);if(!(!s||s[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!n||this.rules.inline.punctuation.exec(n))){let r=[...s[0]].length-1,l,i,o=r,u=0,c=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+r);(s=c.exec(e))!=null;){if(l=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!l)continue;if(i=[...l].length,s[3]||s[4]){o+=i;continue}else if((s[5]||s[6])&&r%3&&!((r+i)%3)){u+=i;continue}if(o-=i,o>0)continue;i=Math.min(i,i+o+u);let h=[...s[0]][0].length,a=t.slice(0,r+s.index+h+i);if(Math.min(r,i)%2){let d=a.slice(1,-1);return{type:"em",raw:a,text:d,tokens:this.lexer.inlineTokens(d)}}let p=a.slice(2,-2);return{type:"strong",raw:a,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(n),r=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return s&&r&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let n,s;return e[2]==="@"?(n=e[1],s="mailto:"+n):(n=e[1],s=n),{type:"link",raw:e[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let n,s;if(e[2]==="@")n=e[0],s="mailto:"+n;else{let r;do r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(r!==e[0]);n=e[0],e[1]==="www."?s="http://"+e[0]:s=e[0]}return{type:"link",raw:e[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},B=class Xe{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||W,this.options.tokenizer=this.options.tokenizer||new me,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let n={other:E,block:ke.normal,inline:ne.normal};this.options.pedantic?(n.block=ke.pedantic,n.inline=ne.pedantic):this.options.gfm&&(n.block=ke.gfm,this.options.breaks?n.inline=ne.breaks:n.inline=ne.gfm),this.tokenizer.rules=n}static get rules(){return{block:ke,inline:ne}}static lex(e,n){return new Xe(n).lex(e)}static lexInline(e,n){return new Xe(n).inlineTokens(e)}lex(e){e=e.replace(E.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){let s=this.inlineQueue[n];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],s=!1){for(this.options.pedantic&&(e=e.replace(E.tabCharGlobal,"    ").replace(E.spaceLine,""));e;){let r;if(this.options.extensions?.block?.some(i=>(r=i.call({lexer:this},e,n))?(e=e.substring(r.raw.length),n.push(r),!0):!1))continue;if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length);let i=n.at(-1);r.raw.length===1&&i!==void 0?i.raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length);let i=n.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+r.raw,i.text+=`
`+r.text,this.inlineQueue.at(-1).src=i.text):n.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length);let i=n.at(-1);i?.type==="paragraph"||i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+r.raw,i.text+=`
`+r.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),n.push(r);continue}let l=e;if(this.options.extensions?.startBlock){let i=1/0,o=e.slice(1),u;this.options.extensions.startBlock.forEach(c=>{u=c.call({lexer:this},o),typeof u=="number"&&u>=0&&(i=Math.min(i,u))}),i<1/0&&i>=0&&(l=e.substring(0,i+1))}if(this.state.top&&(r=this.tokenizer.paragraph(l))){let i=n.at(-1);s&&i?.type==="paragraph"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):n.push(r),s=l.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length);let i=n.at(-1);i?.type==="text"?(i.raw+=(i.raw.endsWith(`
`)?"":`
`)+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):n.push(r);continue}if(e){let i="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(i);break}else throw new Error(i)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let s=e,r=null;if(this.tokens.links){let o=Object.keys(this.tokens.links);if(o.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)o.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,r.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let l=!1,i="";for(;e;){l||(i=""),l=!1;let o;if(this.options.extensions?.inline?.some(c=>(o=c.call({lexer:this},e,n))?(e=e.substring(o.raw.length),n.push(o),!0):!1))continue;if(o=this.tokenizer.escape(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.tag(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.link(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(o.raw.length);let c=n.at(-1);o.type==="text"&&c?.type==="text"?(c.raw+=o.raw,c.text+=o.text):n.push(o);continue}if(o=this.tokenizer.emStrong(e,s,i)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.codespan(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.br(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.del(e)){e=e.substring(o.raw.length),n.push(o);continue}if(o=this.tokenizer.autolink(e)){e=e.substring(o.raw.length),n.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(e))){e=e.substring(o.raw.length),n.push(o);continue}let u=e;if(this.options.extensions?.startInline){let c=1/0,h=e.slice(1),a;this.options.extensions.startInline.forEach(p=>{a=p.call({lexer:this},h),typeof a=="number"&&a>=0&&(c=Math.min(c,a))}),c<1/0&&c>=0&&(u=e.substring(0,c+1))}if(o=this.tokenizer.inlineText(u)){e=e.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(i=o.raw.slice(-1)),l=!0;let c=n.at(-1);c?.type==="text"?(c.raw+=o.raw,c.text+=o.text):n.push(o);continue}if(e){let c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return n}},be=class{options;parser;constructor(t){this.options=t||W}space(t){return""}code({text:t,lang:e,escaped:n}){let s=(e||"").match(E.notSpaceStart)?.[0],r=t.replace(E.endingNewline,"")+`
`;return s?'<pre><code class="language-'+q(s)+'">'+(n?r:q(r,!0))+`</code></pre>
`:"<pre><code>"+(n?r:q(r,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,n=t.start,s="";for(let i=0;i<t.items.length;i++){let o=t.items[i];s+=this.listitem(o)}let r=e?"ol":"ul",l=e&&n!==1?' start="'+n+'"':"";return"<"+r+l+`>
`+s+"</"+r+`>
`}listitem(t){let e="";if(t.task){let n=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=n+" "+q(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):e+=n+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let r=0;r<t.header.length;r++)n+=this.tablecell(t.header[r]);e+=this.tablerow({text:n});let s="";for(let r=0;r<t.rows.length;r++){let l=t.rows[r];n="";for(let i=0;i<l.length;i++)n+=this.tablecell(l[i]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${q(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let s=this.parser.parseInline(n),r=Ot(t);if(r===null)return s;t=r;let l='<a href="'+t+'"';return e&&(l+=' title="'+q(e)+'"'),l+=">"+s+"</a>",l}image({href:t,title:e,text:n,tokens:s}){s&&(n=this.parser.parseInline(s,this.parser.textRenderer));let r=Ot(t);if(r===null)return q(n);t=r;let l=`<img src="${t}" alt="${n}"`;return e&&(l+=` title="${q(e)}"`),l+=">",l}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:q(t.text)}},Fe=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},D=class Ve{options;renderer;textRenderer;constructor(e){this.options=e||W,this.options.renderer=this.options.renderer||new be,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Fe}static parse(e,n){return new Ve(n).parse(e)}static parseInline(e,n){return new Ve(n).parseInline(e)}parse(e,n=!0){let s="";for(let r=0;r<e.length;r++){let l=e[r];if(this.options.extensions?.renderers?.[l.type]){let o=l,u=this.options.extensions.renderers[o.type].call({parser:this},o);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){s+=u||"";continue}}let i=l;switch(i.type){case"space":{s+=this.renderer.space(i);continue}case"hr":{s+=this.renderer.hr(i);continue}case"heading":{s+=this.renderer.heading(i);continue}case"code":{s+=this.renderer.code(i);continue}case"table":{s+=this.renderer.table(i);continue}case"blockquote":{s+=this.renderer.blockquote(i);continue}case"list":{s+=this.renderer.list(i);continue}case"html":{s+=this.renderer.html(i);continue}case"paragraph":{s+=this.renderer.paragraph(i);continue}case"text":{let o=i,u=this.renderer.text(o);for(;r+1<e.length&&e[r+1].type==="text";)o=e[++r],u+=`
`+this.renderer.text(o);n?s+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):s+=u;continue}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return s}parseInline(e,n=this.renderer){let s="";for(let r=0;r<e.length;r++){let l=e[r];if(this.options.extensions?.renderers?.[l.type]){let o=this.options.extensions.renderers[l.type].call({parser:this},l);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(l.type)){s+=o||"";continue}}let i=l;switch(i.type){case"escape":{s+=n.text(i);break}case"html":{s+=n.html(i);break}case"link":{s+=n.link(i);break}case"image":{s+=n.image(i);break}case"strong":{s+=n.strong(i);break}case"em":{s+=n.em(i);break}case"codespan":{s+=n.codespan(i);break}case"br":{s+=n.br(i);break}case"del":{s+=n.del(i);break}case"text":{s+=n.text(i);break}default:{let o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return s}},xe=class{options;block;constructor(t){this.options=t||W}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?B.lex:B.lexInline}provideParser(){return this.block?D.parse:D.parseInline}},Wn=class{defaults=Ne();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=D;Renderer=be;TextRenderer=Fe;Lexer=B;Tokenizer=me;Hooks=xe;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(let s of t)switch(n=n.concat(e.call(this,s)),s.type){case"table":{let r=s;for(let l of r.header)n=n.concat(this.walkTokens(l.tokens,e));for(let l of r.rows)for(let i of l)n=n.concat(this.walkTokens(i.tokens,e));break}case"list":{let r=s;n=n.concat(this.walkTokens(r.items,e));break}default:{let r=s;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(l=>{let i=r[l].flat(1/0);n=n.concat(this.walkTokens(i,e))}):r.tokens&&(n=n.concat(this.walkTokens(r.tokens,e)))}}return n}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{let s={...n};if(s.async=this.defaults.async||s.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){let l=e.renderers[r.name];l?e.renderers[r.name]=function(...i){let o=r.renderer.apply(this,i);return o===!1&&(o=l.apply(this,i)),o}:e.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let l=e[r.level];l?l.unshift(r.tokenizer):e[r.level]=[r.tokenizer],r.start&&(r.level==="block"?e.startBlock?e.startBlock.push(r.start):e.startBlock=[r.start]:r.level==="inline"&&(e.startInline?e.startInline.push(r.start):e.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(e.childTokens[r.name]=r.childTokens)}),s.extensions=e),n.renderer){let r=this.defaults.renderer||new be(this.defaults);for(let l in n.renderer){if(!(l in r))throw new Error(`renderer '${l}' does not exist`);if(["options","parser"].includes(l))continue;let i=l,o=n.renderer[i],u=r[i];r[i]=(...c)=>{let h=o.apply(r,c);return h===!1&&(h=u.apply(r,c)),h||""}}s.renderer=r}if(n.tokenizer){let r=this.defaults.tokenizer||new me(this.defaults);for(let l in n.tokenizer){if(!(l in r))throw new Error(`tokenizer '${l}' does not exist`);if(["options","rules","lexer"].includes(l))continue;let i=l,o=n.tokenizer[i],u=r[i];r[i]=(...c)=>{let h=o.apply(r,c);return h===!1&&(h=u.apply(r,c)),h}}s.tokenizer=r}if(n.hooks){let r=this.defaults.hooks||new xe;for(let l in n.hooks){if(!(l in r))throw new Error(`hook '${l}' does not exist`);if(["options","block"].includes(l))continue;let i=l,o=n.hooks[i],u=r[i];xe.passThroughHooks.has(l)?r[i]=c=>{if(this.defaults.async)return Promise.resolve(o.call(r,c)).then(a=>u.call(r,a));let h=o.call(r,c);return u.call(r,h)}:r[i]=(...c)=>{let h=o.apply(r,c);return h===!1&&(h=u.apply(r,c)),h}}s.hooks=r}if(n.walkTokens){let r=this.defaults.walkTokens,l=n.walkTokens;s.walkTokens=function(i){let o=[];return o.push(l.call(this,i)),r&&(o=o.concat(r.call(this,i))),o}}this.defaults={...this.defaults,...s}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return B.lex(t,e??this.defaults)}parser(t,e){return D.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{let s={...n},r={...this.defaults,...s},l=this.onError(!!r.silent,!!r.async);if(this.defaults.async===!0&&s.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));r.hooks&&(r.hooks.options=r,r.hooks.block=t);let i=r.hooks?r.hooks.provideLexer():t?B.lex:B.lexInline,o=r.hooks?r.hooks.provideParser():t?D.parse:D.parseInline;if(r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(e):e).then(u=>i(u,r)).then(u=>r.hooks?r.hooks.processAllTokens(u):u).then(u=>r.walkTokens?Promise.all(this.walkTokens(u,r.walkTokens)).then(()=>u):u).then(u=>o(u,r)).then(u=>r.hooks?r.hooks.postprocess(u):u).catch(l);try{r.hooks&&(e=r.hooks.preprocess(e));let u=i(e,r);r.hooks&&(u=r.hooks.processAllTokens(u)),r.walkTokens&&this.walkTokens(u,r.walkTokens);let c=o(u,r);return r.hooks&&(c=r.hooks.postprocess(c)),c}catch(u){return l(u)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let s="<p>An error occurred:</p><pre>"+q(n.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(n);throw n}}},Q=new Wn;function $(t,e){return Q.parse(t,e)}$.options=$.setOptions=function(t){return Q.setOptions(t),$.defaults=Q.defaults,At($.defaults),$},$.getDefaults=Ne,$.defaults=W,$.use=function(...t){return Q.use(...t),$.defaults=Q.defaults,At($.defaults),$},$.walkTokens=function(t,e){return Q.walkTokens(t,e)},$.parseInline=Q.parseInline,$.Parser=D,$.parser=D.parse,$.Renderer=be,$.TextRenderer=Fe,$.Lexer=B,$.lexer=B.lex,$.Tokenizer=me,$.Hooks=xe,$.parse=$,$.options,$.setOptions,$.use,$.walkTokens,$.parseInline,D.parse,B.lex;let P=[],U=0;const we=4;let We=t=>{let e=[],n={get(){return n.lc||n.listen(()=>{})(),n.value},lc:0,listen(s){return n.lc=e.push(s),()=>{for(let l=U+we;l<P.length;)P[l]===s?P.splice(l,we):l+=we;let r=e.indexOf(s);~r&&(e.splice(r,1),--n.lc||n.off())}},notify(s,r){let l=!P.length;for(let i of e)P.push(i,n.value,s,r);if(l){for(U=0;U<P.length;U+=we)P[U](P[U+1],P[U+2],P[U+3]);P.length=0}},off(){},set(s){let r=n.value;r!==s&&(n.value=s,n.notify(r))},subscribe(s){let r=n.listen(s);return s(n.value),r},value:t};return n};const Qn=5,ye=6,ve=10;let jn=(t,e,n,s)=>(t.events=t.events||{},t.events[n+ve]||(t.events[n+ve]=s(r=>{t.events[n].reduceRight((l,i)=>(i(l),l),{shared:{},...r})})),t.events[n]=t.events[n]||[],t.events[n].push(e),()=>{let r=t.events[n],l=r.indexOf(e);r.splice(l,1),r.length||(delete t.events[n],t.events[n+ve](),delete t.events[n+ve])}),Gn=1e3,Jn=(t,e)=>jn(t,s=>{let r=e(s);r&&t.events[ye].push(r)},Qn,s=>{let r=t.listen;t.listen=(...i)=>(!t.lc&&!t.active&&(t.active=!0,s()),r(...i));let l=t.off;return t.events[ye]=[],t.off=()=>{l(),setTimeout(()=>{if(t.active&&!t.lc){t.active=!1;for(let i of t.events[ye])i();t.events[ye]=[]}},Gn)},()=>{t.listen=r,t.off=l}});function Xn(t,e,n){let s=new Set(e).add(void 0);return t.listen((r,l,i)=>{s.has(i)&&n(r,l,i)})}function Qe(t,e={}){let[,n]=G({}),[s]=G(t.get());return O(()=>{s!==t.get()&&n({})},[]),O(()=>{let r,l,i,o=()=>{r||(r=1,l=setTimeout(()=>{r=void 0,n({})}))};return e.keys?i=Xn(t,e.keys,o):i=t.listen(o),()=>{i(),clearTimeout(l)}},[t,""+e.keys]),t.get()}function Vn({containerRef:t}){const e=Qe(se),n=e[e.length-1]||null;return O(()=>{const s=t.current;s.scrollTop=s.scrollHeight},[n]),f(N,{children:n&&f("div",{class:"hw-msg",children:f("div",{class:"shimmer-container",children:[f("div",{class:"shimmer-overlay",children:n.text}),n.text]})})})}function Yn({messages:t,send:e}){const s=(t[t.length-1]||null)?.actions||[];return f(N,{children:s.length>0&&f("div",{class:"hw-msg actions",children:s.map((r,l)=>f(Kn,{action:r,send:e},l))})})}function Kn({action:t,send:e}){if(t.type==="question")return f("button",{class:"send-btn prompt-btn",onClick:n=>{n.stopPropagation(),e&&e(t.text)},children:[f("span",{class:"icon"}),f("span",{class:"label",children:t.text})]});if(t.type==="selection"){const n=t.data.odds[0]?t.data.odds[0].value:"";return f("button",{class:"send-btn selection-btn",onClick:s=>{s.stopPropagation(),er(t.data.odds),alert(JSON.stringify(t.data.odds,null,2))},children:[f("span",{class:"icon"}),f("span",{class:"label",children:[t.data.selection_text," (",n,")"]})]})}return null}function er(t){if(!t||t.length===0){console.warn("No odds to add to bet slip");return}if(window.altenarWSDK)try{const e=t.map(n=>n.selection_id).filter(Boolean);if(e.length===0){console.warn("No valid selection_id in odds");return}window.altenarWSDK.set({oddIds:e.join(",")})}catch(e){console.error("Failed to add bets to altenarWSDK:",e)}else console.warn("altenarWSDK widget is not loaded")}function Ft({messages:t,send:e}){const n=K();return O(()=>{const s=n.current;s&&(s.scrollTop=s.scrollHeight)},[t]),f(N,{children:f("div",{class:"hw-messages-wrapper",ref:n,children:f("div",{class:"hw-messages",children:[t.map((s,r)=>f(tr,{message:s},r)),f(Vn,{containerRef:n}),f(Yn,{messages:t,send:e})]})})})}function tr({message:t}){const e=K();return O(()=>{t.isStreaming&&e.current&&(e.current.innerHTML=$.parse(t.content))},[t.content,t.isStreaming]),t.content&&f("div",{class:`hw-msg ${t.role}`,ref:e,children:!t.isStreaming&&f("div",{dangerouslySetInnerHTML:{__html:$.parse(t.content)}})})}let Wt=t=>t,J={},je={addEventListener(){},removeEventListener(){}};function nr(){try{return typeof localStorage<"u"}catch{return!1}}nr()&&(J=localStorage),typeof window<"u"&&(je={addEventListener(t,e,n){window.addEventListener("storage",e),window.addEventListener("pageshow",n)},removeEventListener(t,e,n){window.removeEventListener("storage",e),window.removeEventListener("pageshow",n)}});function rr(t,e=void 0,n={}){let s=n.encode||Wt,r=n.decode||Wt,l=We(e),i=l.set;l.set=c=>{let h=s(c);typeof h>"u"?delete J[t]:J[t]=h,i(c)};function o(c){c.key===t?c.newValue===null?i(e):i(r(c.newValue)):J[t]||i(e)}function u(){l.set(J[t]?r(J[t]):e)}return Jn(l,()=>{if(u(),n.listen!==!1)return je.addEventListener(t,o,u),()=>{je.removeEventListener(t,o,u)}}),l}const Qt=rr("messages",[],{encode:JSON.stringify,decode:JSON.parse});function jt({onToggle:t}){const e=Qe(L);return f(N,{children:e==="closing"&&f("div",{class:"hw-messages",children:[f("button",{class:"send-btn prompt-btn",onClick:n=>{n.stopPropagation(),Qt.set([]),L.set("refresh")},children:[f("span",{class:"icon"}),f("span",{class:"label",children:"Clear History"})]}),f("button",{class:"send-btn prompt-btn",onClick:n=>{n.stopPropagation(),t(),L.set("idle")},children:[f("span",{class:"icon"}),f("span",{class:"label",children:"Minimize"})]}),f("button",{class:"send-btn prompt-btn",onClick:n=>{n.stopPropagation(),L.set("idle")},children:[f("span",{class:"icon"}),f("span",{class:"label",children:"Cancel"})]})]})})}function sr(t,e){const n=(r,l)=>{r={...r};for(const[i,o]of Object.entries(l))if(r[i]===void 0||r[i]===null){if(r[i]=o,Array.isArray(r[i]))for(const u of r[i])delete u.index}else if(typeof r[i]=="string"&&typeof o=="string")r[i]+=o;else if(typeof r[i]=="number"&&typeof o=="number")r[i]=o;else if(Array.isArray(r[i])&&Array.isArray(o)){const u=r[i];for(let c=0;c<o.length;c++){const{index:h,...a}=o[c];if(h-u.length>1)throw new Error(`Error: An array has an empty value when tool_calls are constructed. tool_calls: ${u}; tool: ${o}`);u[h]=n(u[h],a)}}else typeof r[i]=="object"&&typeof o=="object"&&(r[i]=n(r[i],o));return r},s=e.choices[0];return s?n(t,s.delta):t}function lr(t){const e=[];for(const n of t)n.role==="user"?e.push({role:"user",content:n.content}):n.role==="assistant"&&e.push({role:"assistant",content:n.content});return e}function ir(t){for(const e of t)if(e&&e.response_id)return e.response_id;return null}function Gt({open:t,onToggle:e}){return f("div",{class:`hw-widget-btn ${t?"open":"minimized"}`,onClick:e})}function Jt({config:t}){return t?.footer?null:f("footer",{class:"hw-footer",children:["Powered by ",f("a",{href:"https://www.sstrader.com",target:"_blank",rel:"noopener noreferrer",children:"sstrader"})]})}function Ge(t){if(t&&t.defaultAssistantMessage){const{content:e,actions:n}=t.defaultAssistantMessage;let s=n;return Array.isArray(n)&&n.length>3&&(s=n.slice().sort(()=>Math.random()-.5).slice(0,3)),{role:"welcome",content:e||"Hello! How can I help you?",actions:s||[]}}return{role:"welcome",content:"Hello! How can I help you?",actions:[{type:"question",text:"Predict top football match from Sweden."},{type:"question",text:"predict Panathinaikos - Rangers"},{type:"question",text:"Show me the chances for Hacken vs Anderlecht that both teams will score"}]}}const L=We("idle"),se=We([]);function or(t){const e=t.messageStore||Qt,[n,s]=G(!t.minimized),[r,l]=G(()=>{const _=e.get();if(!_||_.length===0){const x=Ge(t);return e.set([x]),[x]}return _}),[i,o]=G(""),[u,c]=G([]),h=K([]),a=Qe(L),p=K(null);O(()=>{if(a==="refresh"){const _=e.get();if(!_||_.length===0){const x=Ge(t);l([x]),e.set([x])}else l([..._]);L.set("idle")}a==="idle"&&se.set([])},[a]);async function d(_,x,w){p.current&&p.current.abort(),p.current=new AbortController;try{const R={model:t.model,messages:[...lr(r),_],previous_response_id:ir(r),stream:!0};t.metadata!=null&&(R.metadata=t.metadata);let H=`${t.baseURL}/api/v1/chat/completions`;const I={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.api_key}`},body:JSON.stringify(R),signal:p.current.signal};t.cookieAuth&&(I.credentials="include");const C=(await fetch(H,I)).body.getReader(),Z=new TextDecoder;let Je="",le={};for(;;){const{value:ar,done:cr}=await C.read();if(cr)break;Je+=Z.decode(ar,{stream:!0});const Xt=Je.split(`
`);Je=Xt.pop();for(const Vt of Xt){if(!Vt.startsWith("data: "))continue;const Yt=Vt.slice(6).trim();if(Yt==="[DONE]")return;const X=JSON.parse(Yt);le=sr(le,X),X.id&&(le.response_id=X.id),X.choices?.[0]?.delta&&x(X.choices[0]),X.choices?.[0]?.finish_reason&&(console.log("onDone message",le),w(le))}}}catch(R){if(R.name==="AbortError")return;console.error("Error:",R)}}const g=_=>{l(x=>{const w=[...x,_];return e.set(w),w})},y=_=>{const x=typeof _=="string"?_:i;if(!x.trim())return;const w={role:"user",content:x};g(w),o(""),L.set("sending"),g({role:"assistant",content:"",isStreaming:!0,actions:[]}),d(w,k,m)};function k(_){const{delta:x}=_;x?.content&&l(w=>{const R=w.length-1,H=[...w],I={...H[R]};return I.content+=x.content,H[R]=I,H}),x?.actions&&c(w=>{const R=[...w,x.actions];return h.current=R,console.log("Updated actions:",R),R}),x?.reason&&(se.set([...se.get(),x.reason]),console.log("reason",x?.reason))}function m(_){l(x=>{const w=[...x];return w[w.length-1]={..._,isStreaming:!0,role:"assistant",reason:se.get(),actions:h.current},e.set(w),console.log("Final assistant message:",w[w.length-1]),w}),c([]),h.current=[],L.set("idle"),p.current=null}const b=()=>{p.current&&(p.current.abort(),p.current=null),l(_=>{const x=_.slice(0,-1);if(x.length===0){const w=Ge(t);return e.set([w]),[w]}return e.set(x),x}),L.set("idle")},z=!!t.target;return z?f(N,{children:[!z&&f(Gt,{open:n,onToggle:()=>s(_=>!_)}),n&&f("div",{class:"hw-widget open",children:[f(Tt,{config:t,open:n,onToggle:()=>s(_=>!_)}),f("div",{class:"hw-body",children:a==="closing"?f(jt,{onToggle:()=>s(_=>!_)}):f(Ft,{messages:r,send:y})}),f(Rt,{config:t,status:a,draft:i,setDraft:o,send:y,cancel:b}),!t.noCredits&&f(Jt,{config:t})]})]}):f("div",{class:"hw-widget-root",children:f(N,{children:[f(Gt,{open:n,onToggle:()=>s(_=>!_)}),n&&f("div",{class:"hw-widget open",children:[f(Tt,{config:t,open:n,onToggle:()=>s(_=>!_)}),f("div",{class:"hw-body",children:a==="closing"?f(jt,{onToggle:()=>s(_=>!_)}):f(Ft,{messages:r,send:y})}),f(Rt,{config:t,status:a,draft:i,setDraft:o,send:y,cancel:b}),!t.noCredits&&f(Jt,{})]})]})})}(function(t,e,n){const s=t[n]&&t[n].q||[];function r(){return{minimized:!0,css_url:["/widget.css"],api_key:"",globalName:n,embedding:!1,header:!0,footer:!0,baseURL:"https://api.dev.app.sstrader.com",model:"sstrader-2",metadata:null,previous_response_id:null,bookmaker_id:null,cookieAuth:!1}}let l=r(),i=!1,o=null,u=null,c=null,h=0;const a=50;let p=l.globalName;function d(k,m={}){k==="init"&&(l=Object.assign(r(),m),p=l.globalName||n,t[p]=d,g()),k==="destroy"&&y()}function g(){if(i)return;let k=null;if(l.target){if(typeof l.target=="string"?k=e.querySelector(l.target):k=l.target,!k){h<a?(h++,c=setTimeout(g,50)):console.warn("Widget target not found (giving up):",l.target);return}}else k=e.createElement("div"),k.id=`hw-widget-root-${p}`,k.className="hw-widget-root",e.body.appendChild(k);const m=k.attachShadow?k.shadowRoot||k.attachShadow({mode:"open"}):k;l.css_url&&(Array.isArray(l.css_url)?l.css_url:[l.css_url]).forEach(z=>{const _=e.createElement("link");_.setAttribute("rel","stylesheet"),_.setAttribute("href",z),m.appendChild(_)});try{dt(st(or,l),m)}finally{o=k,u=m,i=!0,h=0,c&&(clearTimeout(c),c=null)}}function y(){if(c){try{clearTimeout(c)}catch{}c=null}if(h=0,u){try{dt(null,u)}catch{}try{for(;u.firstChild;)u.removeChild(u.firstChild)}catch{}}if(o&&o.parentNode&&!l.target)try{o.remove()}catch{}i=!1,o=null,u=null}t[p]=d,t[p].q=s,s&&s.length&&s.forEach(k=>t[p](...k))})(window,document,"SST")})();
